!function(t){var n={};function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(a,o,function(n){return t[n]}.bind(null,o));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}e.r(n);var o=function t(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_apiBase","http://vue-tests.dev.creonit.ru/api"),a(this,"getItems",(function(t){return $.ajax({type:"GET",dataType:"json",url:"".concat(n._apiBase,"/catalog/").concat(t)})})),a(this,"getCartItems",(function(){return $.ajax({type:"GET",dataType:"json",url:"".concat(n._apiBase,"/cart/list")})})),a(this,"addItemToCart",(function(t){return $.ajax({type:"POST",url:"".concat(n._apiBase,"/cart/product/").concat(t)})})),a(this,"updateAmountItem",(function(t,e){return $.ajax({type:"PUT",url:"".concat(n._apiBase,"/cart/product/").concat(t,"amount=").concat(e)})})),a(this,"removeItemFromCart",(function(t){return $.ajax({type:"DELETE",url:"".concat(n._apiBase,"/cart/product/").concat(t)})}))};!function(t){var n=new o;t(document).ready((function(){e()}));var e=function(){return n.getCartItems().done((function(n){var e,a,o;a=(e=n).price,o=e.list,t("table tbody").empty(),o.map((function(n,e){var a=n.product,o=a.id,i=a.title,c=n.amount,r=n.total;t("table tbody").append('\n        <tr class="cart-item" data-id="'.concat(o,'">\n          <td>').concat(e+1,'</td>\n          <td class="left">').concat(i,'</td>\n          <td>\n            <span class="count">').concat(c,"</span>\n          </td>\n          <td class>").concat(r,"</td>\n        </tr>\n      "))})),t(".cart-total span").html(a)}))};t(".button-cart").on("click",(function(){var n=t(".cart");t(this).hasClass("expanded")?n.slideUp():n.slideDown(),t(this).toggleClass("expanded")})),t(".notifications").on("click",".notification-close",(function(){t(this).closest(".notification").remove()})),t(".categories-buttons").on("click",".button-category",(function(e){if(t(this).hasClass("active"))return!1;t(".button-category.active").removeClass("active"),t(this).addClass("active"),n.getItems(t(this).data("category")).done((function(n){return function(n){t(".items-list").html(null),n.map((function(n){var e=n.id,a=n.image_preview,o=n.title,i=n.price;t(".items-list").append('\n        <div class="item" data-id="'.concat(e,'">\n          <img src="').concat(a,'" alt="">\n          <div class="item-info">\n            <p>Название:<br> <span class="name">').concat(o,"</span></p>\n            <p>Цена: ").concat(i,'</p>\n          </div>\n          <button class="button button-add">Добавить в корзину</button>\n        </div>\n      '))}))}(n.items)}))})),t(".items-list").on("click",".button-add",(function(){var a=this,o=t(this).closest(".item").data("id"),i=t(this).closest(".item").find(".name").text();t(this).prop("disabled",!0),n.addItemToCart(o).done((function(){var n;t(a).prop("disabled",!1),n=t('\n      <div class="notification">\n        <span class="notification-close">X</span>\n        <p>Товар "'.concat(i,'" добавлен в корзину</p>\n      </div>\n    ')),t(".notifications").prepend(n),setTimeout((function(){n.fadeOut(200,(function(){t(this).remove(),console.log()}))}),1500),e()}))}))}(jQuery)}]);